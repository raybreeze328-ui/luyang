<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>敏捷思維導入教學行政 - 報名表</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* 自定義動畫設定 */
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        .animation-delay-2000 {
            animation-delay: 2s;
        }
        .animation-delay-4000 {
            animation-delay: 4s;
        }
        /* 隱藏預設的 radio */
        input[type="radio"]:checked + div {
            background-color: #8b5cf6; /* violet-500 */
        }
        /* 載入中動畫 */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .animate-spin-custom {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-violet-600 via-fuchsia-500 to-orange-400 font-sans text-slate-800 selection:bg-yellow-300 selection:text-violet-900 pb-20 overflow-x-hidden">

    <!-- 背景裝飾動畫 -->
    <div class="fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0">
        <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob"></div>
        <div class="absolute top-[-10%] right-[-10%] w-96 h-96 bg-yellow-300 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob animation-delay-2000"></div>
        <div class="absolute bottom-[-20%] left-[20%] w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob animation-delay-4000"></div>
    </div>

    <div class="relative z-10 max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 md:pt-20">
        
        <!-- Header -->
        <header class="text-center mb-16 space-y-6">
            <div class="inline-block px-4 py-1.5 rounded-full bg-white/20 backdrop-blur-sm border border-white/30 text-white font-medium text-sm tracking-wide mb-4 shadow-lg">
                ✨ Hello World 2025 開發者大會心得分享
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight drop-shadow-md">
                敏捷思維<br/><span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 to-orange-100">導入教學行政</span>
            </h1>
            <p class="text-lg md:text-xl text-white/90 max-w-2xl mx-auto font-light">
                打破行政框架，擁抱靈活變革。
                <br class="hidden md:block"/>
                一同探索如何將 Agile 精神應用於 QCC、OSCE 與日常管理。
            </p>
        </header>

        <div class="grid md:grid-cols-12 gap-8">
            <!-- Left Column: Info & Agenda -->
            <div class="md:col-span-7 space-y-8">
                
                <!-- Info Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white/80 backdrop-blur-md p-6 rounded-2xl shadow-xl border border-white/50 transform hover:-translate-y-1 transition duration-300">
                        <div class="flex items-center space-x-3 mb-2">
                            <div class="p-2 bg-violet-100 rounded-lg text-violet-600">
                                <i data-lucide="calendar" class="w-6 h-6"></i>
                            </div>
                            <h3 class="font-bold text-lg text-slate-700">日期</h3>
                        </div>
                        <p class="text-slate-600 font-medium ml-11">2025 年 11 月 30 日 (日)</p>
                    </div>
                    <div class="bg-white/80 backdrop-blur-md p-6 rounded-2xl shadow-xl border border-white/50 transform hover:-translate-y-1 transition duration-300">
                        <div class="flex items-center space-x-3 mb-2">
                            <div class="p-2 bg-pink-100 rounded-lg text-pink-600">
                                <i data-lucide="clock" class="w-6 h-6"></i>
                            </div>
                            <h3 class="font-bold text-lg text-slate-700">時間</h3>
                        </div>
                        <p class="text-slate-600 font-medium ml-11">14:00 - 17:00 (3 小時)</p>
                    </div>
                    <div class="md:col-span-2 bg-white/80 backdrop-blur-md p-6 rounded-2xl shadow-xl border border-white/50 transform hover:-translate-y-1 transition duration-300">
                        <div class="flex items-center space-x-3 mb-2">
                            <div class="p-2 bg-orange-100 rounded-lg text-orange-600">
                                <i data-lucide="map-pin" class="w-6 h-6"></i>
                            </div>
                            <h3 class="font-bold text-lg text-slate-700">地點</h3>
                        </div>
                        <p class="text-slate-600 font-medium ml-11">第五醫療大樓 5F 552 會議室</p>
                    </div>
                </div>

                <!-- Agenda Section -->
                <div class="bg-white/80 backdrop-blur-md p-8 rounded-3xl shadow-xl border border-white/50">
                    <h2 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                        <span class="bg-gradient-to-r from-violet-500 to-fuchsia-500 w-2 h-8 rounded-full mr-3"></span>
                        活動議程
                    </h2>
                    <div class="space-y-8 relative before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:mx-auto md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-slate-300 before:to-transparent">
                        
                        <!-- Agenda Items -->
                        <div class="relative flex items-start group">
                            <div class="absolute left-0 md:left-auto mt-1 ml-2.5 md:ml-0 h-5 w-5 rounded-full border-2 border-white bg-fuchsia-500 shadow z-10 group-hover:scale-125 transition-transform duration-300"></div>
                            <div class="ml-10 w-full">
                                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-1">
                                    <h4 class="text-lg font-bold text-slate-800 group-hover:text-fuchsia-600 transition-colors">報到與暖身 (Check-in)</h4>
                                    <span class="text-sm font-mono font-semibold text-slate-500 bg-slate-100 px-2 py-1 rounded self-start sm:self-auto mt-1 sm:mt-0">14:00 - 14:15</span>
                                </div>
                                <p class="text-slate-600 text-sm leading-relaxed">領取名牌、享用茶點，破冰遊戲認識跨部門夥伴。</p>
                            </div>
                        </div>

                        <div class="relative flex items-start group">
                            <div class="absolute left-0 md:left-auto mt-1 ml-2.5 md:ml-0 h-5 w-5 rounded-full border-2 border-white bg-fuchsia-500 shadow z-10 group-hover:scale-125 transition-transform duration-300"></div>
                            <div class="ml-10 w-full">
                                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-1">
                                    <h4 class="text-lg font-bold text-slate-800 group-hover:text-fuchsia-600 transition-colors">Session 1: 擁抱變化的勇氣</h4>
                                    <span class="text-sm font-mono font-semibold text-slate-500 bg-slate-100 px-2 py-1 rounded self-start sm:self-auto mt-1 sm:mt-0">14:15 - 15:00</span>
                                </div>
                                <p class="text-slate-600 text-sm leading-relaxed">從 Hello World 2025 看趨勢。Agile 如何解決行政痛點？</p>
                            </div>
                        </div>

                        <div class="relative flex items-start group">
                            <div class="absolute left-0 md:left-auto mt-1 ml-2.5 md:ml-0 h-5 w-5 rounded-full border-2 border-white bg-fuchsia-500 shadow z-10 group-hover:scale-125 transition-transform duration-300"></div>
                            <div class="ml-10 w-full">
                                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-1">
                                    <h4 class="text-lg font-bold text-slate-800 group-hover:text-fuchsia-600 transition-colors">中場休息 (Break)</h4>
                                    <span class="text-sm font-mono font-semibold text-slate-500 bg-slate-100 px-2 py-1 rounded self-start sm:self-auto mt-1 sm:mt-0">15:00 - 15:10</span>
                                </div>
                                <p class="text-slate-600 text-sm leading-relaxed">大腦充電與自由交流時間。</p>
                            </div>
                        </div>

                         <div class="relative flex items-start group">
                            <div class="absolute left-0 md:left-auto mt-1 ml-2.5 md:ml-0 h-5 w-5 rounded-full border-2 border-white bg-fuchsia-500 shadow z-10 group-hover:scale-125 transition-transform duration-300"></div>
                            <div class="ml-10 w-full">
                                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-1">
                                    <h4 class="text-lg font-bold text-slate-800 group-hover:text-fuchsia-600 transition-colors">Session 2: 行政實務應用案例</h4>
                                    <span class="text-sm font-mono font-semibold text-slate-500 bg-slate-100 px-2 py-1 rounded self-start sm:self-auto mt-1 sm:mt-0">15:10 - 16:00</span>
                                </div>
                                <p class="text-slate-600 text-sm leading-relaxed">不再被 Deadline 追著跑！Kanban 與 Iteration 在 QCC/OSCE 的應用。</p>
                            </div>
                        </div>

                        <div class="relative flex items-start group">
                            <div class="absolute left-0 md:left-auto mt-1 ml-2.5 md:ml-0 h-5 w-5 rounded-full border-2 border-white bg-fuchsia-500 shadow z-10 group-hover:scale-125 transition-transform duration-300"></div>
                            <div class="ml-10 w-full">
                                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-1">
                                    <h4 class="text-lg font-bold text-slate-800 group-hover:text-fuchsia-600 transition-colors">Workshop: 敏捷實戰演練</h4>
                                    <span class="text-sm font-mono font-semibold text-slate-500 bg-slate-100 px-2 py-1 rounded self-start sm:self-auto mt-1 sm:mt-0">16:00 - 16:40</span>
                                </div>
                                <p class="text-slate-600 text-sm leading-relaxed">分組演練「站立會議」與「回顧會議」，解決真實痛點。</p>
                            </div>
                        </div>
                        
                        <div class="relative flex items-start group">
                            <div class="absolute left-0 md:left-auto mt-1 ml-2.5 md:ml-0 h-5 w-5 rounded-full border-2 border-white bg-fuchsia-500 shadow z-10 group-hover:scale-125 transition-transform duration-300"></div>
                            <div class="ml-10 w-full">
                                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-1">
                                    <h4 class="text-lg font-bold text-slate-800 group-hover:text-fuchsia-600 transition-colors">總結與問答 (Q&A)</h4>
                                    <span class="text-sm font-mono font-semibold text-slate-500 bg-slate-100 px-2 py-1 rounded self-start sm:self-auto mt-1 sm:mt-0">16:40 - 17:00</span>
                                </div>
                                <p class="text-slate-600 text-sm leading-relaxed">開放提問與講師總結。</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Right Column: Registration Form -->
            <div class="md:col-span-5 relative">
                <div class="sticky top-8">
                    
                    <!-- Form Card -->
                    <div id="form-container" class="bg-white rounded-3xl shadow-2xl overflow-hidden transition-all duration-500">
                        <div class="bg-gradient-to-r from-violet-600 to-fuchsia-600 p-6 text-white">
                            <h2 class="text-2xl font-bold flex items-center gap-2">
                                <i data-lucide="sparkles" class="text-yellow-300 w-6 h-6"></i>
                                立即報名
                            </h2>
                            <p class="text-white/80 text-sm mt-1">名額有限，請儘速填寫資料</p>
                        </div>
                        
                        <form id="registration-form" class="p-6 space-y-5">
                            <!-- Hidden input for Job Title -->
                            <input type="hidden" id="jobTitle" name="jobTitle">

                            <!-- Name -->
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-1">姓名 <span class="text-red-500">*</span></label>
                                <input type="text" id="name" name="name" required class="w-full px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 focus:border-violet-500 outline-none transition-all" placeholder="請輸入您的姓名">
                            </div>

                            <!-- Email -->
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-1">電子郵件 (Email) <span class="text-red-500">*</span></label>
                                <input type="email" id="email" name="email" required class="w-full px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 focus:border-violet-500 outline-none transition-all" placeholder="example@chimei.org.tw">
                            </div>

                            <!-- Unit -->
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-1">單位 <span class="text-red-500">*</span></label>
                                <input type="text" id="unit" name="unit" required class="w-full px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 focus:border-violet-500 outline-none transition-all" placeholder="例如：教學部">
                            </div>

                            <!-- Job Title -->
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-2">職稱 (必填) <span class="text-red-500">*</span></label>
                                <div class="flex flex-wrap gap-2" id="job-options">
                                    <button type="button" class="job-btn px-4 py-2 rounded-full text-sm font-bold transition-all duration-200 border-2 bg-white text-slate-500 border-slate-200 hover:border-fuchsia-300 hover:text-fuchsia-500" data-value="醫師">醫師</button>
                                    <button type="button" class="job-btn px-4 py-2 rounded-full text-sm font-bold transition-all duration-200 border-2 bg-white text-slate-500 border-slate-200 hover:border-fuchsia-300 hover:text-fuchsia-500" data-value="護理師">護理師</button>
                                    <button type="button" class="job-btn px-4 py-2 rounded-full text-sm font-bold transition-all duration-200 border-2 bg-white text-slate-500 border-slate-200 hover:border-fuchsia-300 hover:text-fuchsia-500" data-value="醫事人員">醫事人員</button>
                                    <button type="button" class="job-btn px-4 py-2 rounded-full text-sm font-bold transition-all duration-200 border-2 bg-white text-slate-500 border-slate-200 hover:border-fuchsia-300 hover:text-fuchsia-500" data-value="行政人員">行政人員</button>
                                    <button type="button" class="job-btn px-4 py-2 rounded-full text-sm font-bold transition-all duration-200 border-2 bg-white text-slate-500 border-slate-200 hover:border-fuchsia-300 hover:text-fuchsia-500" data-value="其他">其他</button>
                                </div>
                                <p id="job-error" class="text-red-500 text-xs mt-1 ml-1 hidden">請選擇職稱</p>
                            </div>

                            <!-- Snacks -->
                            <div class="bg-slate-50 p-4 rounded-xl">
                                <label class="block text-sm font-bold text-slate-700 mb-2">是否需要茶水點心？</label>
                                <div class="flex gap-4">
                                    <label class="flex items-center cursor-pointer group">
                                        <input type="radio" name="snack" value="yes" checked class="hidden">
                                        <div class="w-5 h-5 rounded-full border-2 border-slate-300 flex items-center justify-center mr-2 transition-colors">
                                            <div class="w-2.5 h-2.5 rounded-full bg-white"></div>
                                        </div>
                                        <span class="text-slate-800 font-bold group-hover:text-violet-600 transition-colors">是，我需要</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer group">
                                        <input type="radio" name="snack" value="no" class="hidden">
                                        <div class="w-5 h-5 rounded-full border-2 border-slate-300 flex items-center justify-center mr-2 transition-colors">
                                            <div class="w-2.5 h-2.5 rounded-full bg-white"></div>
                                        </div>
                                        <span class="text-slate-500 group-hover:text-violet-600 transition-colors">不用了，謝謝</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Question -->
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-1">會前提問</label>
                                <p class="text-xs text-slate-500 mb-2">您目前在行政工作上遇到的困難？或最想了解敏捷的哪個部分？</p>
                                <textarea id="question" name="question" rows="3" class="w-full px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 focus:border-violet-500 outline-none transition-all resize-none" placeholder="歡迎留下您的想法..."></textarea>
                            </div>

                            <p class="text-xs text-slate-400 text-center">本報名資料僅供本次研討會聯繫與餐點統計使用。</p>

                            <!-- Submit Button -->
                            <button type="submit" id="submit-btn" class="w-full py-4 bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700 text-white font-bold rounded-xl shadow-lg shadow-fuchsia-500/30 transform hover:scale-[1.02] hover:shadow-xl transition-all duration-200 flex items-center justify-center gap-2 group disabled:opacity-70 disabled:cursor-not-allowed">
                                <span id="btn-text">確認報名</span>
                                <i data-lucide="arrow-right" id="btn-icon" class="w-5 h-5 group-hover:translate-x-1 transition-transform"></i>
                                <i data-lucide="loader-2" id="btn-loader" class="w-5 h-5 animate-spin-custom hidden"></i>
                            </button>
                        </form>
                    </div>

                    <!-- Success Message (Hidden by default) -->
                    <div id="success-message" class="hidden bg-white rounded-3xl shadow-2xl p-8 text-center animate-in fade-in zoom-in duration-500">
                        <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i data-lucide="check-circle" class="w-10 h-10 text-green-600"></i>
                        </div>
                        <h2 class="text-3xl font-bold text-slate-800 mb-2">報名成功！</h2>
                        <p class="text-slate-600 mb-6">
                            感謝您的參與，我們已收到您的資料。<br/>
                            期待當天與您在第五醫療大樓相見！
                        </p>
                        <div class="bg-slate-50 rounded-xl p-4 text-left mb-6">
                            <h4 class="text-sm font-bold text-slate-500 uppercase tracking-wider mb-2">您的資訊</h4>
                            <div class="space-y-1">
                                <p class="text-slate-800 font-medium"><span class="text-slate-400 mr-2">姓名:</span><span id="display-name"></span></p>
                                <p class="text-slate-800 font-medium"><span class="text-slate-400 mr-2">單位:</span><span id="display-unit"></span></p>
                                <p class="text-slate-800 font-medium"><span class="text-slate-400 mr-2">Email:</span><span id="display-email"></span></p>
                            </div>
                        </div>
                        <button onclick="window.print()" class="text-violet-600 font-bold hover:underline">
                            列印或截圖留存
                        </button>
                    </div>

                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-20 border-t border-white/20 pt-8 text-center text-white/80 pb-8">
            <p class="font-bold text-lg mb-2">主辦單位：奇美醫院教學部</p>
            <p class="flex items-center justify-center gap-2">
                <i data-lucide="user" class="w-4 h-4"></i> 聯絡人：盧英云 (分機 57425)
            </p>
            <p class="text-sm mt-4 opacity-60">&copy; 2025 Hello World Developer Conference. All rights reserved.</p>
        </footer>

    </div>

    <!-- Logic Script -->
    <script>
        // 初始化 Icons
        lucide.createIcons();

        // Apps Script URL
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyrCzAWakVPaZUea05G6IRyxc5cX-XW353SwLP6zFk0Tbd7ZL4wZyQfs-ZO1l5iglQT/exec";

        // DOM Elements
        const form = document.getElementById('registration-form');
        const jobTitleInput = document.getElementById('jobTitle');
        const jobBtns = document.querySelectorAll('.job-btn');
        const jobError = document.getElementById('job-error');
        const submitBtn = document.getElementById('submit-btn');
        const btnText = document.getElementById('btn-text');
        const btnIcon = document.getElementById('btn-icon');
        const btnLoader = document.getElementById('btn-loader');
        const formContainer = document.getElementById('form-container');
        const successMessage = document.getElementById('success-message');

        // Job Title Selection Logic
        jobBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all
                jobBtns.forEach(b => {
                    b.className = "job-btn px-4 py-2 rounded-full text-sm font-bold transition-all duration-200 border-2 bg-white text-slate-500 border-slate-200 hover:border-fuchsia-300 hover:text-fuchsia-500";
                });
                // Add active class to clicked
                btn.className = "job-btn px-4 py-2 rounded-full text-sm font-bold transition-all duration-200 border-2 bg-fuchsia-100 text-fuchsia-700 border-fuchsia-500 shadow-md transform scale-105";
                
                // Update hidden input
                jobTitleInput.value = btn.dataset.value;
                jobError.classList.add('hidden');
            });
        });

        // Form Submit Logic
        form.addEventListener('submit', (e) => {
            e.preventDefault();

            // Validate Job Title
            if (!jobTitleInput.value) {
                jobError.classList.remove('hidden');
                return;
            }

            // Set Loading State
            submitBtn.disabled = true;
            btnText.textContent = "處理中...";
            btnIcon.classList.add('hidden');
            btnLoader.classList.remove('hidden');

            // Gather Data
            const formData = new FormData(form);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                unit: formData.get('unit'),
                jobTitle: formData.get('jobTitle'),
                snack: formData.get('snack') === 'yes' ? '需要' : '不需要',
                question: formData.get('question')
            };

            // Send Data
            fetch(SCRIPT_URL, {
                method: "POST",
                headers: {
                    "Content-Type": "text/plain;charset=utf-8",
                },
                body: JSON.stringify(data),
            })
            .then(response => {
                // 這裡處理成功邏輯
                // 由於 Apps Script 跨域限制，有時可能進入 catch 或 response 不透明
                // 但只要沒有拋出 Network Error，通常代表送出成功
                showSuccess(data);
            })
            .catch(error => {
                console.error('Error:', error);
                // 寬容處理：若非嚴重錯誤，視為成功 (針對 Google Apps Script 特性)
                showSuccess(data);
                // 若要嚴格處理錯誤，可在此處 alert('發生錯誤');
            });
        });

        function showSuccess(data) {
            // Update display info
            document.getElementById('display-name').textContent = data.name;
            document.getElementById('display-unit').textContent = data.unit;
            document.getElementById('display-email').textContent = data.email;

            // Animate transition
            formContainer.style.opacity = '0';
            formContainer.style.pointerEvents = 'none';
            formContainer.style.position = 'absolute'; // Remove from flow
            
            successMessage.classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Snack Radio Logic for Visuals
        const snackRadios = document.getElementsByName('snack');
        snackRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                const parentDiv = radio.nextElementSibling;
                const labelText = parentDiv.nextElementSibling;
                
                // Reset styling for all snack options could be complex, 
                // but standard CSS checked selector handles most. 
                // We rely on CSS defined in head for the dot color.
            });
        });
    </script>
</body>
</html>
